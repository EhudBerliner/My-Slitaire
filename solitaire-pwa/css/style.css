:root {
    --bg-color: #2e7d32;
    --card-ratio: 1.4;
    --card-width: 13vw; /* Mobile default */
    --card-height: calc(var(--card-width) * var(--card-ratio));
    --spacing: 8px;
    --text-color: #fff;
    --accent-color: #ffd700;
}

@media (min-width: 600px) {
    :root {
        --card-width: 80px; 
    }
}

* { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0; padding: 0;
    background-color: var(--bg-color);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
    touch-action: none;
    height: 100vh;
}

/* Header */
header {
    height: 60px;
    background: rgba(0,0,0,0.3);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 15px;
    color: var(--text-color);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.header-left { display: flex; align-items: center; gap: 15px; }
.game-info span { display: block; font-size: 0.75rem; opacity: 0.9; }
.game-info b { font-size: 0.9rem; color: var(--accent-color); }
.icon-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }

.title-block { text-align: center; line-height: 1; }
h1 { margin: 0; font-size: 1.2rem; }
.version-badge { 
    font-size: 0.65rem; background: rgba(255,255,255,0.2); 
    padding: 2px 6px; border-radius: 4px; cursor: pointer; 
}
.version-badge:hover { background: red; } /* Visual cue for reset */

/* Menu */
.side-menu {
    position: fixed; top: 0; right: -280px; width: 260px; height: 100%;
    background: #f4f4f4; color: #333; z-index: 1000;
    transition: transform 0.3s ease;
    box-shadow: -5px 0 15px rgba(0,0,0,0.2);
    display: flex; flex-direction: column;
}
.side-menu.open { transform: translateX(-280px); }
.menu-header { display: flex; justify-content: space-between; padding: 20px; border-bottom: 1px solid #ddd; }
.menu-list { list-style: none; padding: 0; margin: 0; }
.menu-list li { padding: 15px 20px; border-bottom: 1px solid #eee; cursor: pointer; display: flex; align-items: center; gap: 10px; }
.menu-list li:active { background: #e0e0e0; }
.overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 999; }
.overlay.active { display: block; }
.settings-area { padding: 20px; margin-top: auto; background: #e9e9e9; }

/* Board */
#gameBoard { padding: 10px; max-width: 900px; margin: 0 auto; height: calc(100vh - 60px); }
.top-row { display: flex; justify-content: space-between; margin-bottom: 2vh; }
.stock-container, .foundations-container { display: flex; gap: var(--spacing); }

.pile {
    width: var(--card-width); height: var(--card-height);
    border-radius: 5px;
    border: 1px solid rgba(255,255,255,0.2);
    position: relative;
}
.foundation { display: flex; justify-content: center; align-items: center; font-size: 2rem; color: rgba(255,255,255,0.3); background: rgba(0,0,0,0.1); }

.tableau-container { display: flex; justify-content: space-between; height: 100%; }
.tableau-col { width: var(--card-width); position: relative; height: 100%; }

/* Cards */
.card {
    width: var(--card-width); height: var(--card-height);
    background: white; border-radius: 5px;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    position: absolute; top: 0; left: 0;
    display: flex; flex-direction: column; justify-content: space-between; padding: 2px 5px;
    font-weight: bold; font-size: 1.1rem;
    transition: transform 0.1s;
    will-change: transform, top, left;
}
.card.red { color: #d32f2f; }
.card.black { color: #212121; }
.card.back {
    background: repeating-linear-gradient(45deg, #1976d2, #1976d2 10px, #1565c0 10px, #1565c0 20px);
    border: 2px solid #fff;
}
.card.dragging { z-index: 9999 !important; pointer-events: none; opacity: 0.9; box-shadow: 5px 5px 15px rgba(0,0,0,0.5); }
.card.hint-anim { animation: shake 0.5s ease-in-out; border: 2px solid yellow; }

@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

/* Utilities */
.hidden { visibility: hidden; }