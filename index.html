<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>סוליטר פרו - Solitaire Pro</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1b5e20">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="סוליטר פרו">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header id="mainHeader">
        <div class="header-left">
            <button id="menuBtn" class="icon-btn" aria-label="תפריט">
                <svg viewBox="0 0 24 24" width="28" height="28">
                    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
                </svg>
            </button>
            <div class="game-info">
                <div class="info-item">
                    <span class="info-label">זמן</span>
                    <span class="info-value" id="timeDisplay">00:00</span>
                </div>
                <div class="info-item">
                    <span class="info-label">מהלכים</span>
                    <span class="info-value" id="movesDisplay">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ניקוד</span>
                    <span class="info-value" id="scoreDisplay">0</span>
                </div>
            </div>
        </div>
        <div class="header-center">
            <div class="title-block">
                <h1>סוליטר פרו</h1>
                <small id="versionDisplay" class="version-badge" title="לחץ לאיפוס מלא">v2.0.0</small>
            </div>
        </div>
        <div class="header-right">
            <button id="undoBtn" class="icon-btn" aria-label="ביטול מהלך" title="ביטול מהלך">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z" />
                </svg>
            </button>
            <button id="hintBtn" class="icon-btn" aria-label="רמז" title="רמז">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Side Menu -->
    <div id="sideMenu" class="side-menu">
        <div class="menu-header">
            <h2>תפריט</h2>
            <button id="closeMenuBtn" class="close-btn" aria-label="סגור תפריט">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                </svg>
            </button>
        </div>
        
        <div class="menu-content">
            <div class="menu-section">
                <h3>משחק</h3>
                <ul class="menu-list">
                    <li id="newGameBtn">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" />
                        </svg>
                        <span>משחק חדש</span>
                    </li>
                    <li id="autoCompleteBtn">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                        </svg>
                        <span>סיום אוטומטי</span>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <h3>הגדרות</h3>
                <div class="setting-item">
                    <label for="difficultySelect">רמת קושי:</label>
                    <select id="difficultySelect" class="custom-select">
                        <option value="1">קל (1 קלף)</option>
                        <option value="3" selected>רגיל (3 קלפים)</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="tableThemeSelect">רקע שולחן:</label>
                    <select id="tableThemeSelect" class="custom-select">
                        <option value="green">ירוק קלאסי</option>
                        <option value="blue">כחול</option>
                        <option value="red">אדום</option>
                        <option value="purple">סגול</option>
                        <option value="dark">כהה</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="cardBackSelect">גב קלף:</label>
                    <select id="cardBackSelect" class="custom-select">
                        <option value="blue">כחול</option>
                        <option value="red">אדום</option>
                        <option value="green">ירוק</option>
                        <option value="pattern">משובץ</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="soundToggle" checked>
                        <span>צלילים</span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="animationsToggle" checked>
                        <span>אנימציות</span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="largeCardsToggle">
                        <span>קלפים גדולים (נגישות)</span>
                    </label>
                </div>
            </div>

            <div class="menu-section">
                <h3>סטטיסטיקות</h3>
                <ul class="stats-list">
                    <li>
                        <span>משחקים ששוחקו:</span>
                        <strong id="statsGamesPlayed">0</strong>
                    </li>
                    <li>
                        <span>משחקים שנוצחו:</span>
                        <strong id="statsGamesWon">0</strong>
                    </li>
                    <li>
                        <span>אחוז ניצחונות:</span>
                        <strong id="statsWinRate">0%</strong>
                    </li>
                    <li>
                        <span>שיא ניקוד:</span>
                        <strong id="statsBestScore">0</strong>
                    </li>
                    <li>
                        <span>זמן ממוצע:</span>
                        <strong id="statsAvgTime">00:00</strong>
                    </li>
                </ul>
                <button id="resetStatsBtn" class="secondary-btn">איפוס סטטיסטיקות</button>
            </div>

            <div class="menu-section">
                <h3>אודות</h3>
                <div class="about-content">
                    <p><strong>סוליטר פרו</strong></p>
                    <p>סוליטר קלאסי (Klondike) עם ממשק מודרני ותכונות מתקדמות.</p>
                    <p class="version-info">גרסה: <span id="aboutVersion">2.0.0</span></p>
                    <p class="copyright">© 2024 Solitaire Pro</p>
                </div>
            </div>
        </div>
    </div>
    <div id="overlay" class="overlay"></div>

    <!-- Game Board -->
    <main id="gameBoard">
        <div class="top-row">
            <div class="stock-container">
                <div id="stock" class="pile stock-pile" data-pile="stock">
                    <div class="pile-placeholder">
                        <svg viewBox="0 0 24 24" width="40" height="40">
                            <path fill="currentColor" opacity="0.3" d="M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5M12,4.15L6.04,7.5L12,10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V9.21L13,12.58V19.29L19,15.91Z" />
                        </svg>
                    </div>
                </div>
                <div id="waste" class="pile waste-pile" data-pile="waste"></div>
            </div>
            <div class="foundations-container">
                <div id="foundation-0" class="pile foundation-pile" data-pile="foundation" data-suit="hearts" data-index="0">
                    <div class="pile-placeholder">♥</div>
                </div>
                <div id="foundation-1" class="pile foundation-pile" data-pile="foundation" data-suit="diamonds" data-index="1">
                    <div class="pile-placeholder">♦</div>
                </div>
                <div id="foundation-2" class="pile foundation-pile" data-pile="foundation" data-suit="clubs" data-index="2">
                    <div class="pile-placeholder">♣</div>
                </div>
                <div id="foundation-3" class="pile foundation-pile" data-pile="foundation" data-suit="spades" data-index="3">
                    <div class="pile-placeholder">♠</div>
                </div>
            </div>
        </div>
        
        <div id="tableau" class="tableau-container"></div>
    </main>

    <!-- Win Modal -->
    <div id="winModal" class="modal">
        <div class="modal-content win-modal">
            <div class="confetti-container" id="confettiContainer"></div>
            <h2>🎉 מזל טוב! 🎉</h2>
            <p class="win-message">זכית במשחק!</p>
            <div class="win-stats">
                <div class="win-stat">
                    <span class="stat-label">זמן:</span>
                    <span class="stat-value" id="winTime">00:00</span>
                </div>
                <div class="win-stat">
                    <span class="stat-label">מהלכים:</span>
                    <span class="stat-value" id="winMoves">0</span>
                </div>
                <div class="win-stat">
                    <span class="stat-label">ניקוד:</span>
                    <span class="stat-value" id="winScore">0</span>
                </div>
            </div>
            <button id="newGameFromWin" class="primary-btn">משחק חדש</button>
        </div>
    </div>

    <!-- Hint Indicator -->
    <div id="hintIndicator" class="hint-indicator"></div>

    <!-- Scripts -->
    <script src="js/logic.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/pwa.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
